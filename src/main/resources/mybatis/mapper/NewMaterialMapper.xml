<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gamc.efactory.dao.NewMaterialMapper">
    <select id="countNewMaterial" resultType="java.lang.Integer">
        select COUNT(*)
        from  `wms_new_material`
        <trim prefix="where" suffixOverrides="and | or">
            <if test="newMaterialId != null">
                `new_material_id` = #{newMaterialId} and
            </if>
            <if test="newMaterialCode != null and newMaterialCode!=''">
                `new_material_code` = #{newMaterialCode} and
            </if>
            <if test="newMaterialName != null and newMaterialName!=''">
                `new_material_name` = #{newMaterialName} and
            </if>
            <if test="newMaterialGroup != null and newMaterialGroup!=''">
                `new_material_group` = #{newMaterialGroup} and
            </if>
            <if test="newMaterialUnit != null and newMaterialUnit!=''">
                `new_material_unit` = #{newMaterialUnit} and
            </if>
            <if test="newMaterialSpecs != null and newMaterialSpecs!=''">
                `new_material_specs` = #{newMaterialSpecs} and
            </if>
            <if test="warehouseSymbol != null and warehouseSymbol!=''">
                `warehouse_symbol` = #{warehouseSymbol} and
            </if>
            <if test="applierUserId != null">
                `applier_user_id` = #{applierUserId} and
            </if>
            <if test="applierUserName != null and applierUserName!=''">
                `applier_user_name` = #{applierUserName} and
            </if>
            <if test="applyTime != null and applyTime!=''">
                `apply_time` = #{applyTime} and
            </if>
            <if test="checkerName != null and checkerName!=''">
                `checker_name` = #{checkerName} and
            </if>
            <if test="checkedTime != null and checkedTime!=''">
                `checked_time` = #{checkedTime} and
            </if>
            <if test="state != null and state!=''">
                `state` = #{state} and
            </if>
            <if test = "(_parameter instanceof com.gamc.efactory.model.dataObject.NewMaterial$QueryBuilder) == true">
                <if test="newMaterialIdList != null">
                    `new_material_id` in
                    <foreach collection="newMaterialIdList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test="newMaterialIdSt !=null">
                    `new_material_id` >= #{newMaterialIdSt} and
                </if>
                <if test="newMaterialIdEd!=null">
                    `new_material_id` &lt;= #{newMaterialIdEd} and
                </if>
                <if test="newMaterialCodeList != null">
                    `new_material_code` in
                    <foreach collection="newMaterialCodeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyNewMaterialCode!=null and fuzzyNewMaterialCode.size()>0">
                    (
                    <foreach collection="fuzzyNewMaterialCode"  separator="or" item="item">
                        `New_material_code` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyNewMaterialCode!=null and rightFuzzyNewMaterialCode.size()>0">
                    (
                    <foreach collection="rightFuzzyNewMaterialCode"  separator="or" item="item">
                        `New_material_code` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="newMaterialNameList != null">
                    `new_material_name` in
                    <foreach collection="newMaterialNameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyNewMaterialName!=null and fuzzyNewMaterialName.size()>0">
                    (
                    <foreach collection="fuzzyNewMaterialName"  separator="or" item="item">
                        `New_material_name` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyNewMaterialName!=null and rightFuzzyNewMaterialName.size()>0">
                    (
                    <foreach collection="rightFuzzyNewMaterialName"  separator="or" item="item">
                        `New_material_name` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="newMaterialGroupList != null">
                    `new_material_group` in
                    <foreach collection="newMaterialGroupList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyNewMaterialGroup!=null and fuzzyNewMaterialGroup.size()>0">
                    (
                    <foreach collection="fuzzyNewMaterialGroup"  separator="or" item="item">
                        `New_material_group` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyNewMaterialGroup!=null and rightFuzzyNewMaterialGroup.size()>0">
                    (
                    <foreach collection="rightFuzzyNewMaterialGroup"  separator="or" item="item">
                        `New_material_group` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="newMaterialUnitList != null">
                    `new_material_unit` in
                    <foreach collection="newMaterialUnitList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyNewMaterialUnit!=null and fuzzyNewMaterialUnit.size()>0">
                    (
                    <foreach collection="fuzzyNewMaterialUnit"  separator="or" item="item">
                        `New_material_unit` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyNewMaterialUnit!=null and rightFuzzyNewMaterialUnit.size()>0">
                    (
                    <foreach collection="rightFuzzyNewMaterialUnit"  separator="or" item="item">
                        `New_material_unit` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="newMaterialSpecsList != null">
                    `new_material_specs` in
                    <foreach collection="newMaterialSpecsList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyNewMaterialSpecs!=null and fuzzyNewMaterialSpecs.size()>0">
                    (
                    <foreach collection="fuzzyNewMaterialSpecs"  separator="or" item="item">
                        `New_material_specs` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyNewMaterialSpecs!=null and rightFuzzyNewMaterialSpecs.size()>0">
                    (
                    <foreach collection="rightFuzzyNewMaterialSpecs"  separator="or" item="item">
                        `New_material_specs` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="warehouseSymbolList != null">
                    `warehouse_symbol` in
                    <foreach collection="warehouseSymbolList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyWarehouseSymbol!=null and fuzzyWarehouseSymbol.size()>0">
                    (
                    <foreach collection="fuzzyWarehouseSymbol"  separator="or" item="item">
                        `Warehouse_symbol` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyWarehouseSymbol!=null and rightFuzzyWarehouseSymbol.size()>0">
                    (
                    <foreach collection="rightFuzzyWarehouseSymbol"  separator="or" item="item">
                        `Warehouse_symbol` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="applierUserIdList != null">
                    `applier_user_id` in
                    <foreach collection="applierUserIdList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test="applierUserIdSt !=null">
                    `applier_user_id` >= #{applierUserIdSt} and
                </if>
                <if test="applierUserIdEd!=null">
                    `applier_user_id` &lt;= #{applierUserIdEd} and
                </if>
                <if test="applierUserNameList != null">
                    `applier_user_name` in
                    <foreach collection="applierUserNameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyApplierUserName!=null and fuzzyApplierUserName.size()>0">
                    (
                    <foreach collection="fuzzyApplierUserName"  separator="or" item="item">
                        `Applier_user_name` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyApplierUserName!=null and rightFuzzyApplierUserName.size()>0">
                    (
                    <foreach collection="rightFuzzyApplierUserName"  separator="or" item="item">
                        `Applier_user_name` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="applyTimeList != null">
                    `apply_time` in
                    <foreach collection="applyTimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyApplyTime!=null and fuzzyApplyTime.size()>0">
                    (
                    <foreach collection="fuzzyApplyTime"  separator="or" item="item">
                        `Apply_time` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyApplyTime!=null and rightFuzzyApplyTime.size()>0">
                    (
                    <foreach collection="rightFuzzyApplyTime"  separator="or" item="item">
                        `Apply_time` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="checkerNameList != null">
                    `checker_name` in
                    <foreach collection="checkerNameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyCheckerName!=null and fuzzyCheckerName.size()>0">
                    (
                    <foreach collection="fuzzyCheckerName"  separator="or" item="item">
                        `Checker_name` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyCheckerName!=null and rightFuzzyCheckerName.size()>0">
                    (
                    <foreach collection="rightFuzzyCheckerName"  separator="or" item="item">
                        `Checker_name` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="checkedTimeList != null">
                    `checked_time` in
                    <foreach collection="checkedTimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyCheckedTime!=null and fuzzyCheckedTime.size()>0">
                    (
                    <foreach collection="fuzzyCheckedTime"  separator="or" item="item">
                        `Checked_time` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyCheckedTime!=null and rightFuzzyCheckedTime.size()>0">
                    (
                    <foreach collection="rightFuzzyCheckedTime"  separator="or" item="item">
                        `Checked_time` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="stateList != null">
                    `state` in
                    <foreach collection="stateList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyState!=null and fuzzyState.size()>0">
                    (
                    <foreach collection="fuzzyState"  separator="or" item="item">
                        `State` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyState!=null and rightFuzzyState.size()>0">
                    (
                    <foreach collection="rightFuzzyState"  separator="or" item="item">
                        `State` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
            </if>
        </trim>
    </select>

    <select id="queryMaxMaterialCode" resultType="java.lang.String">
        SELECT MAX(new_material_code)  FROM `wms_new_material` WHERE new_material_code LIKE #{materialCodeHead}
    </select>
</mapper>